

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tool: mp_mpt2c &mdash; Microprobe v0.5 - HEAD  Documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/minilogo_white_256px2.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="next" title="Tool: mp_objdump2dma" href="tools_mp_objdump2dma.html" />
    <link rel="prev" title="Tool: mp_epi" href="tools_mp_epi.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Microprobe: Microbenchmark Generation Framework
          

          
            
            <img src="_static/minilogo_whiteb_150px.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.5 - HEAD 
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index_microprobe.html">Microprobe</a></li>
<li class="toctree-l1"><a class="reference internal" href="start.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tools.html">Command line tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tools_target_definition.html">Command line target definition scheme</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mpt_format.html">Microprobe test (mpt) format</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_ctest_format.html">C test format</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_bin2asm.html">Tool: mp_bin2asm</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_bin2objdump.html">Tool: mp_bin2objdump</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_c2mpt.html">Tool: mp_c2mpt</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_coblst2mpt.html">Tool: mp_coblst2mpt</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_dma2objdump.html">Tool: mp_dma2objdump</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_epi.html">Tool: mp_epi</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Tool: mp_mpt2c</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-usage">Basic usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#full-usage">Full usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fix-flags">Fix flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-outputs">Example outputs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_objdump2dma.html">Tool: mp_objdump2dma</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_objdump2mpt.html">Tool: mp_objdump2mpt</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_seq.html">Tool: mp_seq</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_seqtune.html">Tool: mp_seqtune</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_target.html">Tool: mp_target</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="devel.html">Development Corner</a></li>
<li class="toctree-l1"><a class="reference internal" href="index_publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="copyright.html">Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Microprobe: Microbenchmark Generation Framework</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="tools.html">Command line tools</a> &raquo;</li>
        
      <li>Tool: mp_mpt2c</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="tools_mp_objdump2dma.html" class="btn btn-neutral float-right" title="Tool: mp_objdump2dma" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tools_mp_epi.html" class="btn btn-neutral float-left" title="Tool: mp_epi" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tool-mp-mpt2c">
<h1>Tool: mp_mpt2c<a class="headerlink" href="#tool-mp-mpt2c" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>MicroprobeTest (mpt) to C loop tool provides a command-line interface (CLI) to
convert code snippets to C + inline assembly format. Using a test definition
format (<a class="reference internal" href="tools_mpt_format.html"><span class="doc">Microprobe test (mpt) format</span></a>), the user can specify the initial state
(initialization of the registers), the variables that have to be declared
and the code snippet, which might contain references to those variables,
branch labels, fixed addresses, etc. Check the <a class="reference internal" href="tools_mpt_format.html"><span class="doc">Microprobe test (mpt) format</span></a> for
further details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The microbenchmark generation policy implemented in this tool reproduces
exactly the code provided. It resolves any symbolic
references (references to data, or branch targets), and only if specified
by the user, it also modifies memory accesses to avoid segmentation fault
issues. If the <code class="docutils literal notranslate"><span class="pre">--endless</span></code> flag is provided, the tool  wraps the code
provided within an endless loop.</p>
</div>
</div>
<div class="section" id="basic-usage">
<h2>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">mp_mpt2c</span> <span class="o">-</span><span class="n">T</span> <span class="n">TARGET</span> <span class="o">-</span><span class="n">t</span> <span class="n">MPT_DEFINITION_FILE</span> <span class="o">-</span><span class="n">O</span> <span class="n">MPT_OUTPUT_FILE</span>
</pre></div>
</div>
<p>where:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 53%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Flag/Argument</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-T</span> <span class="pre">TARGET</span></code>, <code class="docutils literal notranslate"><span class="pre">--target</span> <span class="pre">TARGET</span></code></p></td>
<td><p>Target definition string. Check: <a class="reference internal" href="tools_target_definition.html"><span class="doc">Command line target definition scheme</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-t</span> <span class="pre">MPT_DEFINITION_FILE</span></code>, <code class="docutils literal notranslate"><span class="pre">--mpt-definition-file</span> <span class="pre">MPT_DEFINITION_FILE</span></code></p></td>
<td><p>Microprobe test definition file. Check: <a class="reference internal" href="tools_mpt_format.html"><span class="doc">Microprobe test (mpt) format</span></a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-O</span> <span class="pre">MPT_OUTPUT_FILE</span></code>, <code class="docutils literal notranslate"><span class="pre">--mpt-output-file</span> <span class="pre">MPT_OUTPUT_FILE</span></code></p></td>
<td><p>Output file name.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="full-usage">
<h2>Full usage<a class="headerlink" href="#full-usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mp_mpt2c.py: INFO: Processing input arguments...
usage: mp_mpt2c.py [-h] [-P SEARCH_PATH [SEARCH_PATH ...]] [-V] [-v] [-d]
                   [-c CONFIG_FILE [CONFIG_FILE ...]] [-C FORCE_CONFIG_FILE]
                   [--dump-configuration-file OUTPUT_CONFIG_FILE]
                   [--dump-full-configuration-file OUTPUT_CONFIG_FILE]
                   [-A ARCHITECTURE_PATHS] [-M MICROARCHITECTURE_PATHS]
                   [-E ENVIRONMENT_PATHS] -T TARGET [--list-architectures]
                   [--list-microarchitectures] [--list-environments]
                   [--traceback] [--profile PROFILE_OUTPUT] -t
                   MPT_DEFINITION_FILE -O C_OUTPUT_FILE
                   [--fix-indirect-branches] [--fix-branch-next]
                   [--fix-memory-references] [--fix-memory-registers]
                   [--endless]

MicroprobeTest (mpt) to C tool

optional arguments:
  -h, --help            show this help message and exit
  -P SEARCH_PATH [SEARCH_PATH ...], --default_paths SEARCH_PATH [SEARCH_PATH ...]
                        Default search paths for microprobe target definitions
  -V, --version         Show Microprobe version and exit
  -v, --verbosity       Verbosity level (Values: [0,1,2,3,4]). Each time this
                        argument is specified the verbosity level is
                        increased. By default, no logging messages are shown.
                        These are the four levels available:
                        
                          -v (1): critical messages
                          -v -v (2): critical and error messages
                          -v -v -v (3): critical, error and warning messages
                          -v -v -v -v (4): critical, error, warning and info messages
                        
                        Specifying more than four verbosity flags, will
                        default to the maximum of four. If you need extra
                        information, enable the debug mode (--debug or -d
                        flags).
  -d, --debug           Enable debug mode in Microprobe framework. Lots of
                        output messages will be generated

Configuration arguments:

  Command arguments related to configuration file handling

  -c CONFIG_FILE [CONFIG_FILE ...], --configuration CONFIG_FILE [CONFIG_FILE ...]
                        Configuration file. The configuration files will be
                        readed in order of appearance. Values are reset by the
                        last configuration file in case of non-list values.
                        List values will be appended (not reset)
  -C FORCE_CONFIG_FILE, --force-configuration FORCE_CONFIG_FILE
                        Force configuration file. Use this configuration file
                        as the default start configuration. This disables any
                        system-wide, or user-provided configuration.
  --dump-configuration-file OUTPUT_CONFIG_FILE
                        Dump a configuration file with the actual
                        configuration used
  --dump-full-configuration-file OUTPUT_CONFIG_FILE
                        Dump a configuration file with the actual
                        configuration used plus all the configuration options
                        not set

Target path arguments:

  Command arguments related to target paths

  -A ARCHITECTURE_PATHS, --architecture-paths ARCHITECTURE_PATHS
                        Search path for architecture definitions. Microprobe
                        will search in these paths for architecture
                        definitions
  -M MICROARCHITECTURE_PATHS, --microarchitecture-paths MICROARCHITECTURE_PATHS
                        Search path for microarchitecture definitions.
                        Microprobe will search in these paths for
                        microarchitecture definitions
  -E ENVIRONMENT_PATHS, --environment-paths ENVIRONMENT_PATHS
                        Search path for environment definitions. Microprobe
                        will search in these paths for environment definitions

Target arguments:

  Command arguments related to target specification and queries

  -T TARGET, --target TARGET
                        Target tuple. Microprobe follows a GCC-like target
                        definition scheme, where a target is defined by a
                        tuple as following:
                        
                          &lt;arch-name&gt;-&lt;uarch-name&gt;-&lt;env-name&gt;
                        
                        where:
                        
                          &lt;arch-name&gt;: is the name of the architecture
                          &lt;uarch-name&gt;: is the name of the microarchitecture
                          &lt;env-name&gt;: is the name of the environment
                        
                        One can use --list-* options to get the list of
                        definitions available in the default search paths or
                        the paths specified by the different --*-paths options
  --list-architectures  Generate a list of architectures available in the
                        defined search paths and exit
  --list-microarchitectures
                        Generate a list of microarchitectures available in the
                        defined search paths and exit
  --list-environments   Generate a list of environments available in the
                        defined search paths and exit

Debug arguments:

  Command arguments related to debugging facilities

  --traceback           show a traceback and starts a python debugger (pdb)
                        when an error occurs. &#39;pdb&#39; is an interactive python
                        shell that facilitates the debugging of errors
  --profile PROFILE_OUTPUT
                        dump profiling information into given file (see
                        &#39;pstats&#39; module)

Microprobe Test arguments:

  Command arguments related to Microprobe Test (mpt) generation

  -t MPT_DEFINITION_FILE, --mpt-definition-file MPT_DEFINITION_FILE
                        Microprobe test (mpt) definition file

MPT to C arguments:

  Command arguments related to MPT to C tool

  -O C_OUTPUT_FILE, --c-output-file C_OUTPUT_FILE
                        C output file name

Fixing options:

  Command arguments related to fixing options

  --fix-indirect-branches
                        Fix branches without known target
  --fix-branch-next     Force target of branches to be the next sequential
                        instruction
  --fix-memory-references
                        Ensure that registers used by instructions accessing
                        storage are initialized to valid locations
  --fix-memory-registers
                        Fix non-storage instructions touching registers used
                        for storage address computations (implies --fix-
                        memory-referenes flag)
  --endless             Wrap the code generated within an endless loop

Environment variables:

  MICROPROBETEMPLATES    Default path for microprobe templates
  MICROPROBEDEBUG        If set, enable debug
  MICROPROBEDEBUGPASSES  If set, enable debug during passes
  MICROPROBEASMHEXFMT    Assembly hexadecimal format. Options:
                         &#39;all&#39; -&gt; All immediates in hex format
                         &#39;address&#39; -&gt; Address immediates in hex format (default)
                         &#39;none&#39; -&gt; All immediate in integer format
</pre></div>
</div>
</div>
<div class="section" id="fix-flags">
<h2>Fix flags<a class="headerlink" href="#fix-flags" title="Permalink to this headline">¶</a></h2>
<p>As stated above, this tool does not ensure that the memory address accessed by
the assembly code access valid storage regions. For that, one has to declare
the appropriate variables and initialize valid register contents.
Also, it might be the case that the code still is not correct and extra
modifications are required.</p>
<p>Going through the assembly to understand it and manually modify it to make
sure it runs correctly can be a tedious task. This tool provides a set of flags
that perform predefined modifications on that code with the aim to make
sure that at least it will run correctly. One has to take into account that
the modifications might change the performance profile of the code. So, we
strongly suggest you to validate the code generated to make sure it is still
valid for your needs.</p>
<p>In the table below, we summarize the flags that
enable extra modification to the code:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Flag</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--fix-memory-references</span></code></p></td>
<td><p>Fix registers that are used to compute addresses in
instruction accessing that access storage locations.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--fix-memory-registers</span></code></p></td>
<td><p>Fix instructions touching registers used for storage
address computations. If an instruction modifies a
register that is used for storage address computation,
the instruction is modified to not modify such register.
Instead, a register that minimizes the dependency
between instructions is used. Also, load and update
or store and update instructions are replaced by their
very same implementation without the update. Implies
–fix-memory-references flag.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--fix-indirect-branches</span></code></p></td>
<td><p>Fix branches without known target. Any branch with
unknown target is replaced by an unconditional branch
to the next instruction.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--fix-branch-next</span></code></p></td>
<td><p>Force target of branches to be the next sequential
instruction.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example-outputs">
<h2>Example outputs<a class="headerlink" href="#example-outputs" title="Permalink to this headline">¶</a></h2>
<p class="rubric">Example 1:</p>
<p>Command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">mp_mpt2c</span> <span class="o">-</span><span class="n">T</span> <span class="n">riscv_v22</span><span class="o">-</span><span class="n">riscv_generic</span><span class="o">-</span><span class="n">riscv64_linux_gcc</span> <span class="o">-</span><span class="n">t</span> <span class="n">example1</span><span class="o">.</span><span class="n">mpt</span> <span class="o">-</span><span class="n">O</span> <span class="n">output</span><span class="o">.</span><span class="n">c</span> <span class="o">--</span><span class="n">endless</span>
</pre></div>
</div>
<p>Input file <code class="docutils literal notranslate"><span class="pre">example1.mpt</span></code>:</p>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">;</span> <span class="n">Microprobe</span> <span class="n">Test</span> <span class="n">Definition</span> <span class="n">File</span>
<span class="p">[</span><span class="n">MPT</span><span class="p">]</span>
<span class="n">mpt_version</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="p">;</span>  <span class="n">Format</span> <span class="n">version</span> <span class="n">of</span> <span class="n">this</span> <span class="n">MPT</span> <span class="n">file</span><span class="o">.</span>

<span class="p">[</span><span class="n">REGISTERS</span><span class="p">]</span> <span class="p">;</span> <span class="n">Section</span> <span class="n">to</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">initial</span> <span class="n">register</span> <span class="n">values</span>

<span class="p">;</span> <span class="n">Format</span><span class="p">:</span> <span class="n">register</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span> <span class="n">E</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="p">:</span>

<span class="p">;</span> <span class="n">Set</span> <span class="n">GR0</span><span class="p">,</span> <span class="n">GR1</span> <span class="ow">and</span> <span class="n">GR2</span> <span class="n">register</span> <span class="n">to</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="n">values</span> <span class="n">respectively</span>
<span class="p">;</span><span class="n">GR0</span> <span class="o">=</span> <span class="mh">0x0</span>


<span class="p">[</span><span class="n">DATA</span><span class="p">]</span> <span class="p">;</span> <span class="n">Section</span> <span class="n">to</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">variables</span>

<span class="p">;</span> <span class="n">Data</span> <span class="n">section</span> <span class="n">default</span> <span class="n">address</span><span class="o">.</span> <span class="n">Variables</span> <span class="n">will</span> <span class="n">be</span> <span class="n">placed</span> <span class="kn">from</span> <span class="nn">this</span> <span class="n">address</span>
<span class="p">;</span> <span class="k">if</span> <span class="n">their</span> <span class="n">address</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">specified</span>

<span class="n">default_address</span> <span class="o">=</span> <span class="mh">0x0000000010040000</span>

<span class="p">;</span> <span class="n">Variable</span> <span class="n">Declaration</span>
<span class="p">;</span> <span class="n">Format</span><span class="p">:</span> <span class="n">var_name</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="n">nelems</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">alignment</span><span class="p">,</span> <span class="n">init_values</span> <span class="p">]</span>
<span class="p">;</span> <span class="n">where</span><span class="p">:</span>
<span class="p">;</span>   <span class="o">-</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">string</span> <span class="n">specifying</span> <span class="n">the</span> <span class="nb">type</span> <span class="n">of</span> <span class="n">elements</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">variable</span>
<span class="p">;</span>   <span class="o">-</span> <span class="n">nelems</span><span class="p">:</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">elements</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">variable</span>
<span class="p">;</span>   <span class="o">-</span> <span class="n">address</span> <span class="p">:</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">address</span> <span class="n">of</span> <span class="n">the</span> <span class="n">variable</span><span class="p">,</span> <span class="k">if</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">address</span> <span class="n">will</span> <span class="n">be</span>
<span class="p">;</span>               <span class="n">fixed</span><span class="p">,</span> <span class="n">otherwise</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">computer</span> <span class="n">by</span> <span class="n">microprobe</span>
<span class="p">;</span>   <span class="o">-</span> <span class="n">alignment</span> <span class="p">:</span> <span class="n">alignment</span> <span class="n">requirements</span> <span class="n">of</span> <span class="n">the</span> <span class="n">variable</span><span class="o">.</span> <span class="n">It</span> <span class="n">should</span> <span class="ow">not</span>
<span class="p">;</span>                 <span class="n">conflict</span> <span class="k">with</span> <span class="n">address</span> <span class="k">if</span> <span class="n">specified</span><span class="o">.</span> <span class="n">It</span> <span class="n">can</span> <span class="n">be</span> <span class="nb">set</span> <span class="n">to</span> <span class="kc">None</span>
<span class="p">;</span>   <span class="o">-</span> <span class="n">init_values</span> <span class="p">:</span> <span class="k">if</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">single</span> <span class="n">value</span><span class="p">,</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">elements</span> <span class="n">will</span> <span class="n">be</span>
<span class="p">;</span>                   <span class="n">initialized</span> <span class="n">to</span> <span class="n">that</span> <span class="n">value</span><span class="p">,</span> <span class="k">if</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">array</span><span class="p">,</span> <span class="n">elements</span>
<span class="p">;</span>                   <span class="n">will</span> <span class="n">be</span> <span class="n">initialized</span> <span class="n">to</span> <span class="n">the</span> <span class="n">values</span> <span class="n">specified</span> <span class="ow">in</span> <span class="n">a</span> <span class="nb">round</span><span class="o">-</span>
<span class="p">;</span>                   <span class="n">robin</span> <span class="n">fashion</span><span class="o">.</span> <span class="n">Two</span> <span class="n">special</span> <span class="n">keywords</span> <span class="n">can</span> <span class="n">be</span> <span class="n">specified</span><span class="p">:</span>
<span class="p">;</span>                   <span class="n">RNDFP</span> <span class="ow">and</span> <span class="n">RNDINT</span> <span class="n">to</span> <span class="n">initialize</span> <span class="n">the</span> <span class="n">elements</span> <span class="n">to</span> <span class="n">random</span> <span class="n">FP</span>
<span class="p">;</span>                   <span class="ow">and</span> <span class="n">random</span> <span class="n">INT</span> <span class="n">values</span>
<span class="p">;</span>
<span class="p">;</span> <span class="n">Note</span> <span class="n">that</span> <span class="n">variable</span> <span class="n">names</span> <span class="n">ARE</span> <span class="n">NOT</span> <span class="n">case</span> <span class="n">sensitive</span><span class="o">.</span> <span class="n">I</span><span class="o">.</span><span class="n">e</span><span class="o">.</span> <span class="n">VAR</span> <span class="o">=</span> <span class="n">Var</span> <span class="o">=</span> <span class="n">var</span>

<span class="n">count</span>	<span class="o">=</span>	<span class="p">[</span> <span class="s2">&quot;int64_t&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mh">0x10040000</span><span class="p">,</span> <span class="mh">0x8</span><span class="p">,</span> <span class="mi">3405695742</span> <span class="p">]</span>
<span class="n">linkedlist</span>	<span class="o">=</span>	<span class="p">[</span> <span class="s2">&quot;uint8_t&quot;</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mh">0x10040010</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">,</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">171</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">171</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">171</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">171</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="p">]</span>
<span class="n">microprobe_stack</span>	<span class="o">=</span>	<span class="p">[</span> <span class="s2">&quot;uint8_t&quot;</span><span class="p">,</span> <span class="mi">4096</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="kc">None</span> <span class="p">]</span>

<span class="p">[</span><span class="n">CODE</span><span class="p">]</span> <span class="p">;</span> <span class="n">Section</span> <span class="n">to</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">code</span>

<span class="p">;</span> <span class="n">Code</span> <span class="n">section</span> <span class="n">default</span> <span class="n">address</span><span class="o">.</span> <span class="n">Code</span> <span class="n">will</span> <span class="n">be</span> <span class="n">placed</span> <span class="kn">from</span> <span class="nn">this</span> <span class="n">address</span>
<span class="p">;</span> <span class="k">if</span> <span class="n">the</span> <span class="n">instruction</span> <span class="n">address</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">specified</span>

<span class="n">default_address</span> <span class="o">=</span> <span class="mh">0x000000001002fff0</span>

<span class="p">;</span> <span class="n">The</span> <span class="n">code</span> <span class="n">specified</span> <span class="n">after</span> <span class="s1">&#39;instructions&#39;</span> <span class="n">entry</span> <span class="p">(</span><span class="n">below</span><span class="p">)</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">code</span> <span class="n">that</span> <span class="n">will</span> <span class="n">be</span>
<span class="p">;</span> <span class="n">processed</span> <span class="n">by</span> <span class="n">microprobe</span><span class="o">.</span> <span class="n">The</span> <span class="n">instruction</span> <span class="nb">format</span> <span class="ow">is</span> <span class="n">similar</span> <span class="n">to</span> <span class="n">GNU</span> <span class="n">assembler</span>
<span class="p">;</span> <span class="nb">format</span><span class="p">,</span> <span class="n">it</span> <span class="n">also</span> <span class="n">allows</span> <span class="n">the</span> <span class="n">specification</span> <span class="n">of</span> <span class="n">labels</span> <span class="p">(</span><span class="n">NOT</span> <span class="n">case</span> <span class="n">sensitive</span><span class="p">)</span> <span class="ow">and</span>
<span class="p">;</span> <span class="n">references</span> <span class="n">to</span> <span class="n">the</span> <span class="n">declared</span> <span class="n">variables</span><span class="o">.</span> <span class="n">It</span> <span class="ow">is</span> <span class="n">also</span> <span class="n">possible</span> <span class="n">to</span> <span class="n">specify</span> <span class="n">instruction</span>
<span class="p">;</span> <span class="n">addresses</span> <span class="ow">and</span> <span class="n">to</span> <span class="n">do</span> <span class="n">code</span> <span class="n">expansion</span> <span class="n">by</span> <span class="n">referencing</span> <span class="n">other</span> <span class="n">user</span>
<span class="p">;</span> <span class="n">defined</span> <span class="n">entries</span><span class="o">.</span> <span class="n">Check</span> <span class="n">the</span> <span class="n">example</span> <span class="n">below</span> <span class="n">to</span> <span class="n">see</span> <span class="n">examples</span> <span class="n">of</span> <span class="n">these</span> <span class="n">features</span><span class="o">.</span>
<span class="p">;</span>
<span class="p">;</span> <span class="o">*****************************************************************************</span>
<span class="p">;</span> <span class="o">******</span>  <span class="n">Although</span> <span class="n">Microprobe</span> <span class="n">performs</span> <span class="n">some</span> <span class="n">sanity</span> <span class="n">checks</span><span class="p">,</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">the</span>   <span class="o">********</span>
<span class="p">;</span> <span class="o">******</span>  <span class="n">responsibility</span> <span class="n">of</span> <span class="n">the</span> <span class="n">user</span> <span class="n">to</span> <span class="n">define</span> <span class="n">correct</span> <span class="n">code</span><span class="o">.</span>           <span class="o">********</span>
<span class="p">;</span> <span class="o">******</span>                                                               <span class="o">********</span>
<span class="p">;</span> <span class="o">*****************************************************************************</span>

<span class="n">instructions</span> <span class="o">=</span>
  <span class="o">&lt;</span><span class="n">ELF_ABI_START</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="n">JAL</span> <span class="n">x1</span><span class="p">,</span> <span class="n">c2mpt_function</span>                            
    <span class="n">JAL</span> <span class="n">x1</span><span class="p">,</span> <span class="n">ELF_ABI_EXIT</span>                              
  <span class="mh">0x0000000010030000</span> <span class="o">&lt;</span><span class="n">C2MPT_FUNCTION</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="n">LUI</span> <span class="n">x12</span><span class="p">,</span> <span class="mi">65600</span>                                    
    <span class="n">ADDI</span> <span class="n">x12</span><span class="p">,</span> <span class="n">x12</span><span class="p">,</span> <span class="mi">0</span>                                  
    <span class="n">LD</span> <span class="n">x15</span><span class="p">,</span> <span class="mi">8</span><span class="p">(</span><span class="n">x12</span><span class="p">)</span>                                    
    <span class="n">LD</span> <span class="n">x14</span><span class="p">,</span> <span class="mi">80</span><span class="p">(</span><span class="n">x12</span><span class="p">)</span>                                   
    <span class="n">BEQ</span> <span class="n">x15</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">C2MPT_FUNCTION</span><span class="o">+</span><span class="mh">0X24</span>                  
    <span class="n">LD</span> <span class="n">x13</span><span class="p">,</span> <span class="mi">0</span><span class="p">(</span><span class="n">x15</span><span class="p">)</span>                                    
    <span class="n">LD</span> <span class="n">x15</span><span class="p">,</span> <span class="mi">8</span><span class="p">(</span><span class="n">x15</span><span class="p">)</span>                                    
    <span class="n">ADD</span> <span class="n">x14</span><span class="p">,</span> <span class="n">x14</span><span class="p">,</span> <span class="n">x13</span>                                 
    <span class="n">BNE</span> <span class="n">x15</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">C2MPT_FUNCTION</span><span class="o">+</span><span class="mh">0X14</span>                  
    <span class="n">SLLI</span> <span class="n">x14</span><span class="p">,</span> <span class="n">x14</span><span class="p">,</span> <span class="mi">1</span>                                  
    <span class="n">SD</span> <span class="n">x14</span><span class="p">,</span> <span class="mi">80</span><span class="p">(</span><span class="n">x12</span><span class="p">)</span>                                   
    <span class="n">JALR</span> <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="mi">0</span>                                    
  <span class="mh">0x0000000010030030</span> <span class="o">&lt;</span><span class="n">MY_SUBROUTINE</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="n">SLLI</span> <span class="n">x10</span><span class="p">,</span> <span class="n">x10</span><span class="p">,</span> <span class="mi">1</span>                                  
    <span class="n">LUI</span> <span class="n">x15</span><span class="p">,</span> <span class="mi">65600</span>                                    
    <span class="n">SD</span> <span class="n">x10</span><span class="p">,</span> <span class="mi">80</span><span class="p">(</span><span class="n">x15</span><span class="p">)</span>                                   
    <span class="n">JALR</span> <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="mi">0</span>                                    
  <span class="o">&lt;</span><span class="n">ELF_ABI_EXIT</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="n">ADDI</span> <span class="n">x0</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="mi">0</span>                                    
</pre></div>
</td></tr></table></div>
<p>Output:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mp_mpt2c.py: INFO: Processing input arguments...
mp_mpt2c.py: INFO: Arguments processed!
mp_mpt2c.py: INFO: Importing target definition...
mp_mpt2c.py: INFO: Start generating &#39;/home/rbertra/workspace/repos/github.com/IBM/microprobe/doc/source/examples_outputs/example_mpt2c.c&#39;
mp_mpt2c.py: INFO: Interpreting assembly...
mp_mpt2c.py: WARNING: Instruction address not needed in &#39;LUI x12, 65600&#39;
mp_mpt2c.py: WARNING: Instruction address not needed in &#39;SLLI x10, x10, 1&#39;
mp_mpt2c.py: WARNING: Default data address not needed
mp_mpt2c.py: WARNING: Default code address not needed
mp_mpt2c.py: WARNING: Using endless C wrapper
mp_mpt2c.py: INFO: Creating benchmark synthesizer...
mp_mpt2c.py: INFO: Add register initialization pass
mp_mpt2c.py: INFO: Synthesizing...
mp_mpt2c.py: INFO: &#39;/home/rbertra/workspace/repos/github.com/IBM/microprobe/doc/source/examples_outputs/example_mpt2c.c&#39; generated!
</pre></div>
</div>
<p>Output file <code class="docutils literal notranslate"><span class="pre">output.c</span></code>:</p>
<div class="highlight-c notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdint.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>
<span class="kt">int64_t</span> <span class="n">COUNT</span>  <span class="nf">__attribute__</span> <span class="p">((</span><span class="n">aligned</span> <span class="p">(</span><span class="mi">8</span><span class="p">)))</span> <span class="o">=</span> <span class="mi">3405695742</span><span class="p">;</span>
<span class="kt">uint8_t</span> <span class="n">LINKEDLIST</span><span class="p">[</span><span class="mi">80</span><span class="p">]</span>  <span class="o">=</span> <span class="p">{</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">160</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">171</span><span class="p">,</span><span class="mi">108</span><span class="p">,</span><span class="mi">85</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">160</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">171</span><span class="p">,</span><span class="mi">108</span><span class="p">,</span><span class="mi">85</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">64</span><span class="p">,</span><span class="mi">160</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">171</span><span class="p">,</span><span class="mi">108</span><span class="p">,</span><span class="mi">85</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">160</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">171</span><span class="p">,</span><span class="mi">108</span><span class="p">,</span><span class="mi">85</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,};</span>
<span class="kt">uint8_t</span> <span class="n">MICROPROBE_STACK</span><span class="p">[</span><span class="mi">4096</span><span class="p">]</span>  <span class="n">__attribute__</span> <span class="p">((</span><span class="n">aligned</span> <span class="p">(</span><span class="mi">16</span><span class="p">)));</span>
<span class="kt">uint8_t</span> <span class="n">riscv_v22_context_var</span><span class="p">[</span><span class="mi">600</span><span class="p">]</span> <span class="p">;</span>
<span class="kt">char</span> <span class="n">riscv_v22_scratch_var</span><span class="p">[</span><span class="mi">256</span><span class="p">]</span> <span class="p">;</span>
<span class="kt">void</span> <span class="nf">usage</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;Usage:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  -h  Print this help</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  -d  Print micro-benchmark description</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>


<span class="kt">void</span> <span class="nf">description</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="kt">int</span> <span class="n">exit_code</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>


<span class="n">printf</span><span class="p">(</span><span class="s">&quot;================================================================================</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;Microprobe framework general information:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;--------------------------------------------------------------------------------</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Microprobe version: 0.5</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Copyright: Copyright 2018 IBM Corporation</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  License: Apache Version 2.0</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Authors: Ramon Bertran</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Maintainers: Ramon Bertran</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Email: rbertra@us.ibm.com</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Software status: Development</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;Development information:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;--------------------------------------------------------------------------------</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  No packaged version. Use Git to find the current revision.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;================================================================================</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;MICRO-BENCHMARK DESCRIPTION</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;--------------------------------------------------------------------------------</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;Generation time: 05/19/20 18:01:35 EDT</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;Generation policy:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Step: 0 InitializeRegistersPass   Initialize general registers to:  &#39;None&#39; and</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;                                    FP registers to &#39;None&#39; and Vector register t</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;                                    o &#39;None&#39;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Step: 1 SimpleBuildingBlockPass   Create a basic block with &#39;19&#39; instructions</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Step: 2    DeclareVariablesPass   Declaring variables: [&#39;(int64_t) COUNT&#39;, &#39;(u</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;                                    int8_t) LINKEDLIST[80]&#39;, &#39;(uint8_t) MICROPROB</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;                                    E_STACK[4096]&#39;]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Step: 3   ReproduceSequencePass            Reproduce instruction sequence</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;Configured target:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Target ISA: riscv_v22</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  ISA Description: RISC-V v2.2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Target Micro-architecture: riscv_generic</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Micro-architecture Description: Generic RISC-V microarchitecture</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Target Environment: riscv64_linux_gcc</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Environment description: RISC-V architecture (64bit addressing mode), Linux operating system, GCC compiler</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;Target requirements:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;Warnings (includes not checkable requirements):</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Warning  0 - Pass 000: InitializeRegistersPass did not pass the check test</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Warning  1 - Pass 002: DeclareVariablesPass did not pass the check test</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Warning  2 - Pass 003: ReproduceSequencePass did not pass the check test</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;Other Information</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>


<span class="n">exit</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="p">}</span>


<span class="kt">void</span> <span class="nf">process_parameters</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">envp</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Running micro-benchmark...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span> <span class="k">return</span><span class="p">;}</span>
<span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span><span class="n">usage</span><span class="p">();}</span>
<span class="k">if</span> <span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">&#39;-&#39;</span><span class="p">)</span> <span class="p">{</span><span class="n">usage</span><span class="p">();}</span>
<span class="k">if</span> <span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;h&#39;</span><span class="p">)</span> <span class="p">{</span><span class="n">usage</span><span class="p">();}</span>
<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;d&#39;</span><span class="p">)</span> <span class="p">{</span><span class="n">description</span><span class="p">();}</span>
<span class="k">else</span> <span class="p">{</span><span class="n">usage</span><span class="p">();}</span>
<span class="p">}</span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">envp</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">process_parameters</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">,</span> <span class="n">envp</span><span class="p">);</span>
<span class="p">{</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">devrandom</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s">&quot;/dev/urandom&quot;</span><span class="p">,</span> <span class="s">&quot;r&quot;</span><span class="p">);</span>
<span class="n">fread</span><span class="p">(</span><span class="o">&amp;</span><span class="n">riscv_v22_context_var</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">uint8_t</span><span class="p">),</span> <span class="mi">600</span> <span class="p">,</span> <span class="n">devrandom</span><span class="p">);</span>
<span class="n">fclose</span><span class="p">(</span><span class="n">devrandom</span><span class="p">);}</span>
<span class="p">{</span><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">256</span><span class="p">;</span><span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">256</span><span class="p">)</span> <span class="n">memcpy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">riscv_v22_scratch_var</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="o">&amp;</span><span class="n">riscv_v22_context_var</span><span class="p">,</span> <span class="mi">256</span><span class="p">);}</span>
<span class="p">{</span><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">3600</span><span class="p">;</span><span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">600</span><span class="p">)</span> <span class="n">memcpy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">MICROPROBE_STACK</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="o">&amp;</span><span class="n">riscv_v22_context_var</span><span class="p">,</span> <span class="mi">600</span><span class="p">);}</span>
<span class="p">{</span><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">3600</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">4096</span><span class="p">;</span><span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">496</span><span class="p">)</span> <span class="n">memcpy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">MICROPROBE_STACK</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="o">&amp;</span><span class="n">riscv_v22_context_var</span><span class="p">,</span> <span class="mi">496</span><span class="p">);}</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; riscv_v22_context_var_pcrel_1:AUIPC x31, %pcrel_hi(riscv_v22_context_var) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; ADDI x31, x31, %pcrel_lo(riscv_v22_context_var_pcrel_1) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x0, 0x0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x1, 0x8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x2, 0x10(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x3, 0x18(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x4, 0x20(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x5, 0x28(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x6, 0x30(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x7, 0x38(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x8, 0x40(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x9, 0x48(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x10, 0x50(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x11, 0x58(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x12, 0x60(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x13, 0x68(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x14, 0x70(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x15, 0x78(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x16, 0x80(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x17, 0x88(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x18, 0x90(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x19, 0x98(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x20, 0xa0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x21, 0xa8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x22, 0xb0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x23, 0xb8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x24, 0xc0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x25, 0xc8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x26, 0xd0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x27, 0xd8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x28, 0xe0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x29, 0xe8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x30, 0xf0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x31, 0xf8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f0, 0x100(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f1, 0x108(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f2, 0x110(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f3, 0x118(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f4, 0x120(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f5, 0x128(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f6, 0x130(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f7, 0x138(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f8, 0x140(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f9, 0x148(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f10, 0x150(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f11, 0x158(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f12, 0x160(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f13, 0x168(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f14, 0x170(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f15, 0x178(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f16, 0x180(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f17, 0x188(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f18, 0x190(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f19, 0x198(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f20, 0x1a0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f21, 0x1a8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f22, 0x1b0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f23, 0x1b8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f24, 0x1c0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f25, 0x1c8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f26, 0x1d0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f27, 0x1d8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f28, 0x1e0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f29, 0x1e8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f30, 0x1f0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FSD f31, 0x1f8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot;.balign 64&quot;</span><span class="p">);</span>
<span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="p">{</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; ELF_ABI_START:JAL x1, C2MPT_FUNCTION &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; JAL x1, ELF_ABI_EXIT &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; C2MPT_FUNCTION:LUI x12, 65600 &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; ADDI x12, x12, 0x0 &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x15, 0x8(x12) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x14, 0x50(x12) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; BEQ x15, x0, C2MPT_FUNCTION+0x24 &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x13, 0x0(x15) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x15, 0x8(x15) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; ADD x14, x14, x13 &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; BNE x15, x0, C2MPT_FUNCTION+0x14 &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SLLI x14, x14, 1 &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x14, 0x50(x12) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; JALR x0, x1, 0x0 &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; MY_SUBROUTINE:SLLI x10, x10, 1 &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LUI x15, 65600 &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; SD x10, 0x50(x15) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; JALR x0, x1, 0x0 &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; ELF_ABI_EXIT:ADDI x0, x0, 0x0 &quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; riscv_v22_context_var_pcrel_2:AUIPC x31, %pcrel_hi(riscv_v22_context_var) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; ADDI x31, x31, %pcrel_lo(riscv_v22_context_var_pcrel_2) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x0, 0x0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x1, 0x8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x2, 0x10(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x3, 0x18(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x4, 0x20(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x5, 0x28(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x6, 0x30(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x7, 0x38(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x8, 0x40(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x9, 0x48(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x10, 0x50(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x11, 0x58(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x12, 0x60(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x13, 0x68(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x14, 0x70(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x15, 0x78(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x16, 0x80(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x17, 0x88(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x18, 0x90(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x19, 0x98(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x20, 0xa0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x21, 0xa8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x22, 0xb0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x23, 0xb8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x24, 0xc0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x25, 0xc8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x26, 0xd0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x27, 0xd8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x28, 0xe0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x29, 0xe8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x30, 0xf0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f0, 0x100(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f1, 0x108(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f2, 0x110(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f3, 0x118(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f4, 0x120(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f5, 0x128(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f6, 0x130(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f7, 0x138(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f8, 0x140(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f9, 0x148(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f10, 0x150(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f11, 0x158(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f12, 0x160(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f13, 0x168(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f14, 0x170(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f15, 0x178(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f16, 0x180(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f17, 0x188(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f18, 0x190(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f19, 0x198(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f20, 0x1a0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f21, 0x1a8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f22, 0x1b0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f23, 0x1b8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f24, 0x1c0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f25, 0x1c8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f26, 0x1d0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f27, 0x1d8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f28, 0x1e0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f29, 0x1e8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f30, 0x1f0(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; FLD f31, 0x1f8(x31) &quot;</span><span class="p">);</span>
<span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; LD x31, 0xf8(x31) &quot;</span><span class="p">);</span>

<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; <a href="copyright.html">Copyright</a> IBM Corporation, 2011-2020.
 v0.5 - HEAD 
      <span class="lastupdated">
        Last updated on May 19, 2020.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>